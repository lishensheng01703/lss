<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <style>
      body {
        font-family: helvetica, sans-serif;
        width: 350px;
        border: 1px solid;
        padding: 1em;
      }
      label {
        font-weight: bold;
      }
      div {
        padding-bottom: 20px;
      }
      input[type="text"] {
        padding: 5px;
        width: 150px;
      }
      p {
        background: #ffc125;
        color: #5e2612;
        padding: 10px;
        visibility: hidden;
      }
    </style>
  </head>

  <body>
    <div>
      <label for="customname" id="lbl-customname">请输入自定义的名字：</label>
      <input id="customname" type="text" placeholder="大鸡" />
    </div>
    <div>
      <label for="metric">冷笑话</label
      ><input id="metric" type="radio" name="measure" value="metric" checked />
      <label for="american">热笑话</label
      ><input id="american" type="radio" name="measure" value="american" />
    </div>
    <div>
      <button class="randomize">随机生成笑话</button>
    </div>
    <!-- Thanks a lot to Willy Aguirre for his help with the code for this assessment -->
    <p class="story"></p>

    <script>
      const customName = document.getElementById("customname");
      const randomize = document.querySelector(".randomize");
      const story = document.querySelector(".story");

      function randomValueFromArray(array) {
        const random = Math.floor(Math.random() * array.length);
        return array[random];
      }

      let storyText =
        "今天气温 35 摄氏度，:insertx:出门炸街。当走到:inserty:门前时，突然就:insertz:。老铁们都惊呆了，大鸡全程目睹但并没有慌，因为:insertx:是一个 145 公斤的胖子，天气又辣么热。";
      let insertX = ["奥特之父", "无敌战神", "圣诞老登"];
      let insertY = ["沙县小吃", "鬼屋", "紫禁之巅"];
      let insertZ = ["启动后备隐藏能源", "在人行道化成了一坨泥", "变成一只老母鸡飞了" ];


      randomize.addEventListener("click", result);

      function result() {
        let newStory = storyText;

        let xItem = randomValueFromArray(insertX);
        let yItem = randomValueFromArray(insertY);
        let zItem = randomValueFromArray(insertZ);

        newStory = newStory.replace(":insertx:", xItem);
        newStory = newStory.replace(":insertx:", xItem);
        newStory = newStory.replace(":inserty:", yItem);
        newStory = newStory.replace(":insertz:", zItem);

        if (customName.value !== "") {
          const name = customName.value;
          newStory = newStory.replace("大鸡", name);
        }

        if (document.getElementById("american").checked) {
          const weight = Math.round(156 * 2.20462) + " 磅";
          const temperature = Math.round((35 * 9) / 5 + 32) + " 华氏度";
          newStory = newStory.replace("35 摄氏度", temperature);
          newStory = newStory.replace("156 公斤", weight);
        }

        story.textContent = newStory;
        story.style.visibility = "visible";
      }
    </script>
  </body>
</html>
